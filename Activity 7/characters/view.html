<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Naruto API</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        @font-face {
            font-family: 'NarutoFont';
            src: url('../njnaruto.ttf') format('truetype');
        }

        .backButton {
            background: radial-gradient(circle, #FFED8C, #EC7F6C);
            margin: 20px;
            font-weight: bold;
            font-family: 'NarutoFont', sans-serif;
            font-size: 20px;
            border-radius: 10px;
        }

        .characterDetails {
            font-family: Verdana, sans-serif;
            margin-top: 30px;
        }
        
        .characterInfoCard {
            border-radius: 5px;
            margin-top: 30px;
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .characterInfoCard:hover {
            transform: rotate(3deg);
        }

        .clanInfo {
            font-size: 30px;
        }

        img {
            width: 100%; 
            border-radius: 5px;
        }

        .imgContainer {
            background-color: lightgrey;
        }

        .nameInfo {
            font-weight: bold;
        }

        .narutoLogo {
            font-size: 40px;
            font-family: 'NarutoFont', sans-serif;
        }

        .otherInfo {
            font-size: 18px;
        }

        .otherInfo:hover {
            cursor: pointer;
            box-shadow: 1px 1px 5px 1px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>

<body data-bs-theme="light" id="body">
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <span class="navbar-brand narutoLogo">NARUTO</span>
            <!-- Dark Mode Toggle Button -->
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="darkModeToggle" onclick="changeColorMode()">
                <label class="form-check-label" id="btnColor" for="darkModeToggle">Dark Mode</label>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <div class="characterInfoCard" id="characterInfoCard">
                    <div class="imgContainer" id="img-Container">
                        <img id="img" src="">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="characterDetails">
                    <h1 class="display-3 nameInfo" id="title"></h1>
                    <div class="mb-3 clanInfo"><b>Clan: </b><span id="clan"></span></div>

                    <div class="card p-3 otherInfo">
                        <div><b>Nature Type: </b><span id="nature"></span></div>
                        <div><b>Jutsu: </b><span id="jutsu"></span></div>
                        <div><b>Debut: </b><span id="debut"></span></div>
                        <div><b>Occupation: </b><span id="occupation"></span></div>
                        <div><b>Affiliation: </b><span id="affiliation"></span></div>
                        <div><b>Unique Traits: </b><span id="unique"></span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container d-flex justify-content-center my-4">
        <a href="character.html" class="btn backButton">
            Back
        </a>
    </div>

    <script>
        var colors = {
            "Fire Release": "#D7755D",
            "Wind Release": "#AFE3FF",
            "Lightning Release": "#D994E7",
            "Earth Release": "#66C999",
            "Water Release": "#5964C7",
            "Wood Release": "#BC9957",
            "Mud Release": "#8A5808",
            "Lava Release": "#C84F1E",
            "Storm Release": "#645E79",
            "Explosion Release": "#9C4B5B",
            "Boil Release": "#81A6A5",
            "Crystal Release": "#C73FE9",
            "Ice Release": "#6AAFF4",
            "Dust Release": "#CCBCA8",
            "Steel Release": "#7F4E4C",
            "Typhoon Release": "#115C7E",
            "Scorch Release": "#9C3636",
            "Earth Release (Anime only)": "#66C999",
            "Wind Release  (Anime only)": "#AFE3FF",
            "Wind Release  (Novel only)": "#AFE3FF",
            "Wind Release  (Affinity)": "#AFE3FF",
            "Wind Release  (Affinity; Anime only)": "#AFE3FF",
            "Wind Release  (While chakra enhanced)": "#AFE3FF",
            "Lava Release  (Anime only)": "#C84F1E",
            "Wood Release  (Anime only)": "#BC9957",
            "Water Release  (Anime only)": "#5964C7",
            "Water Release  (Novel only)": "#5964C7",
            "Lightning Release  (Anime only)": "#D994E7",
            "Lightning Release  (Affinity)": "#D994E7",
            "Lighting Release  (Affinity; Anime only)": "#D994E7",
            "Fire Release  (While chakra enhanced)": "#D7755D",
            "Fire Release  (Anime only)": "#D7755D",
            "Magnet Release  (Novel only)": "#DFBBA7",
            "Yin Release  (Novel only)": "#797165",
            "Yin Release  (Anime only)": "#797165",
            "Yin Release": "#797165",
            "Yang Release": "#FFFACD",
            "Yin-Yang Release": "#FDF9B9"
        };

        var title = document.getElementById("title");
        var img = document.getElementById("img");
        var imgContainer = document.getElementById("img-Container");
        var nature = document.getElementById("nature");
        var jutsu = document.getElementById("jutsu");
        var debut = document.getElementById("debut");
        var occupation = document.getElementById("occupation");
        var affiliation = document.getElementById("affiliation");
        var unique = document.getElementById("unique");
        var clan = document.getElementById("clan");

        const loadCharacter = async (searchTerm) => {
            const response = await fetch('https://narutodb.xyz/api/character/search?name=' + searchTerm);
            const character = await response.json();

            title.innerHTML = "#" + character.id + " " + character.name;
            img.src = character.images && character.images[0] ? character.images[0] : "Image Not Available";

            const natureTypes = character.natureType && character.natureType.length > 0 ? character.natureType : ["Unknown"];
            nature.innerHTML = natureTypes.join(", ");

            const natureColor = natureTypes[0] in colors ? colors[natureTypes[0]] : "#D3D3D3"; 
            imgContainer.style.backgroundColor = natureColor;
            document.getElementById("characterInfoCard").style.backgroundColor = natureColor;

            jutsu.innerHTML = character.jutsu && character.jutsu.length > 0 ? character.jutsu.join(", ") : "No Jutsu Available";
            debut.innerHTML = character.debut ? (character.debut.anime || character.debut.manga || "Unknown Debut") : "Unknown Debut";
            occupation.innerHTML = character.personal && character.personal.occupation ? character.personal.occupation : "Unknown Occupation";
            affiliation.innerHTML = character.personal && character.personal.affiliation ? character.personal.affiliation : "No Affiliation";
            unique.innerHTML = character.uniqueTraits && character.uniqueTraits.length > 0 ? character.uniqueTraits.join(", ") : "No Unique Traits";
            clan.innerHTML = character.personal && character.personal.clan ? character.personal.clan : "No Clan";
        }

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);

        if (urlParams.has('characterName')) {
            loadCharacter(urlParams.get('characterName'));
        } else {
            document.getElementById("title").innerHTML = "Wrong character";
        }

        var colorMode = "light";
        function changeColorMode() {
            if (colorMode === "light") {
                document.getElementById("body").setAttribute("data-bs-theme", "dark");
                document.getElementById("btnColor").innerHTML = "Light Mode";
                colorMode = "dark";
            } else {
                document.getElementById("body").setAttribute("data-bs-theme", "light");
                document.getElementById("btnColor").innerHTML = "Dark Mode";
                colorMode = "light";
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>